<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Hello World!</title>
    <script src="js/aes.js"></script>
  </head>
  <body>
    <h1>Hello World!</h1>
    <div>
    We are using Node.js <span id="node-version"></span>,
    Chromium <span id="chrome-version"></span>,
    and Electron <span id="electron-version"></span>.
    </div>
    
    <div id="encrypted">
    </div>
    <div id="decrypted">

    </div>
    <script>
        var plainText = "This is a an extremely long message <strong> with </strong> CRLF \n and other items in it.";
        var key = CryptoJS.enc.Hex.parse('76CE9BBA9487266738E3C4F0B3CFA4BE0C0EBA52ED1C3C425E06900442EFE5E1'); 
        var iv = CryptoJS.enc.Hex.parse('76CE9BBA9487266738E3C4F0B3CFA4BE'); 
        var encrypted = CryptoJS.AES.encrypt(plainText, key, { iv: iv }); 
        //var encrypted = CryptoJS.AES.encrypt(plainText, "Secret"); 
        //var cipherText = CryptoJS.enc.Hex.parse(String(encrypted.ciphertext));
        //console.log("cipherText : " + cipherText);
        document.getElementById("encrypted").innerHTML = encrypted;
        var decrypted = CryptoJS.AES.decrypt(encrypted,  key, { iv: iv });
        //var decrypted = CryptoJS.AES.decrypt(encrypted, "Secret");
        console.log("decrypted: " + decrypted.toString());
        let plainTextOut = decodeHexString(decrypted.toString());
        console.log(plainTextOut);
        document.getElementById("decrypted").innerHTML = plainTextOut; 
        function decodeHexString(stringOfHexBytes){
            var localPlainText = "";
            var currentByte = "";
            for (var x = 0;x < stringOfHexBytes.length;x++){
             currentByte = stringOfHexBytes[x] + stringOfHexBytes[++x]; 
             localPlainText += String.fromCharCode(parseInt(currentByte,16));
            }
        return localPlainText;
        }
    </script>

    <!-- You can also require other files to run in this process -->
    <script src="./renderer.js"></script>
  </body>
</html>
